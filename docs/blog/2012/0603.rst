20120603
========

CBSS connection
---------------


- Moved most CBSS site-wide parameters 
  (UserID,OrgUnit,Sector, password,...) 
  from `settings.py` to SiteConfig.
  The SiteConfig detail has a new Tab panel "CBSS".

- Beim Speichern einer Tx25 wurde die NR-Nummer des Klienten nicht 
  automatisch ins Parameterfeld eingetragen.
  Das war ein Bug im Framework. 
  Lag daran, dass die `person_changed` zu früh ausgeführt wurde::
  
    INFO 20120603 StoreField.form2obj() person = u'193'
    20120603 fill_from_person 680601 053-29
    INFO 20120603 StoreField.form2obj() sent = None
    INFO 20120603 StoreField.form2obj() status = u'0'
    INFO 20120603 StoreField.form2obj() environment = u''
    INFO 20120603 StoreField.form2obj() ticket = u''
    INFO 20120603 StoreField.form2obj() request_xml = None
    INFO 20120603 StoreField.form2obj() response_xml = None
    INFO 20120603 StoreField.form2obj() logged_messages = None
    INFO 20120603 StoreField.form2obj() national_id = u''
    INFO 20120603 StoreField.form2obj() birth_date = None
    INFO 20120603 StoreField.form2obj() sis_card_no = None
    INFO 20120603 StoreField.form2obj() id_card_no = None
    INFO 20120603 StoreField.form2obj() first_name = None
    INFO 20120603 StoreField.form2obj() last_name = None
    INFO 20120603 StoreField.form2obj() language = u'de'
    INFO 20120603 StoreField.form2obj() history = u'off'
    INFO 20120603 StoreField.form2obj() user = u'1'
    INFO 20120603 StoreField.form2obj() result = None  

  Also `Store.form2obj` ruft jetzt die eventuellen xxx_changed-Methoden erst auf, 
  nachdem alle Felder des Formulars eingelesen wurden.
  
Schuldnerberatung
-----------------

Die Verteilung au marc-le-franc
(:class:`DistByBudget <lino.modlib.debts.models.DistByBudget>`)
fehlte noch im Ausdruck (d.h. in der Default.odt).

Auch hatte diese Tabelle am Bildschirm den falschen Titel.

Kolonnentitel von
:class:`BudgetSummary <lino.modlib.debts.models.BudgetSummary>`
fehlten (eigentlich dachte ich hier, gar keine Titel zu drucken, 
aber das ist noch nicht möglich.


Migrating to 1.4.4
------------------

Worked on the automatization of migrating to 1.4.4.
Problem is that there are a few contracts (isip and jobs) 
that don't pass the new validation rules and cause 
a ValidatonError "Contracts ends before it started."
These need to be adapted by the end users.
Best solution seems to 
Solution is to not import them but to log a warning message.


on_site_config_saved
--------------------

