<?xml version="1.0" encoding="latin-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=latin-1" />
<meta name="generator" content="Docutils 0.3.6: http://docutils.sourceforge.net/" />
<title>Running Lino as a Web application</title>
<link rel="stylesheet" href="default.css" type="text/css" />
</head>
<body>
<table class="mainTable">
			<tr>
			<td valign="top" class="leftArea">
				<p class="menu">
	<a href="index.html">Home</a>
	<br><a href="http://sourceforge.net/projects/lino/">Forge</a>
	</p>
	
	<p class="copyright">
	&copy; 2001-2004
	<br><a href="mailto:luc.saffre@gmx.net">Luc Saffre</a>
	<br>
	
	<br><a href="http://sourceforge.net">
	<img src="http://sourceforge.net/sflogo.php?group_id=87016&type=1"
   width="88" height="31" border="0" alt="SourceForge.net Logo" /></a>
	</p>
	<br><a href="overview.html">overview</a><br>&nbsp;<a href="adamo/index.html">adamo</a><br>&nbsp;<a href="timtools.html">timtools</a><br>&nbsp;wui<br>&nbsp;<a href="webman.html">webman</a><br>&nbsp;<a href="pds/index.html">pds</a><br><a href="faq.html">faq</a><br><a href="links.html">links</a><br><a href="install.html">install</a><br>&nbsp;<a href="start.html">start</a><br><a href="news.html">news</a><br>&nbsp;<a href="_oops.html">2002</a><br>&nbsp;<a href="_oops.html">2003</a><br>&nbsp;<a href="history.html">history</a></td>
			<td class="textArea"><h1 class="title">Running Lino as a Web application</h1>
<div class="document" id="running-lino-as-a-web-application">
<p>The Web User Interface (WUI) is the first UI for Lino to be
implemented.  This implementation is being done with a future support
for a Graphical User Interface (GUI) in mind.</p>
<p>To run as a Web Application, Lino currently uses Irmen de Jong's
Snakelets server.  This is a standalone HTTP server in pure Python.
Advantage of this aproach is that it is very easy to get a Lino
running on any machine.  Also is the Snakelets code simple and easy to
understand.</p>
<div class="section" id="server-startup">
<h1><a name="server-startup">Server startup</a></h1>
<p>Invoking the <cite>snake/serve.py</cite> script will start the Snakelets server.
The <cite>snake/webapps`directory contains (besides those applications
coming with Snakelets) one application &quot;Lino&quot;.
`snake/webapps/lino/__init__.py</cite> will be run by the server, and it
does especially the starup of the adamo database.  The Database object
which acts as handler is then stored in the &quot;application context&quot;</p>
</div>
<div class="section" id="windows">
<h1><a name="windows">Windows</a></h1>
<p>Windows are abstract descriptors of a web page to be displayed. A
Window contains Components.  Components are things as MenuBar, Label,
Table, EntryField, DataGrid, Button, ...</p>
<p>Windows and their Components are defined in
<cite>lino/agui/widgets.py</cite>. They are abstract enough to be usable for GUI
and WUI.  It is possible that these &quot;Widgets&quot; will be replaced by
anygui.</p>
<p>In a session there can be more than one Window at a time:</p>
<ul class="simple">
<li>the user can simply open another browser instance. All browser
instances on the same maching share the same session.</li>
<li>a window can get children.</li>
</ul>
<p>Creating a non-modal child window corresponds to opening another
browser instance. Creating a modal child means that the parent window
stays in &quot;background&quot;, waiting for the result of the child window.</p>
</div>
<div class="section" id="the-server-and-lino">
<h1><a name="the-server-and-lino">The server and Lino</a></h1>
<p>All Lino Web pages are created by a single Snakelet (MainSnakelet)
who maintains a session-wide list of Window instances and does the
dispatching work of deciding which Window comes next.</p>
<p>The main responsibility of a snakelet is to write some HTML to the
response's output stream.  MainSnakelet does this task by deciding
which window must be rendered next, then creating a <cite>SnakeUI</cite> instance
and calling its <cite>renderWindow()</cite> to do the work.</p>
<p>The <cite>UI</cite> (user interface) class defines methods for communicating with
the user, again hiding the fact whether it is a WUI or a GUI or
any other UI.  In a Web application, UI.renderWindow() will write some
HTML to the response's output stream.  In a GUI application it will
open a Window on the users desktop. In a console UI it will display
some text to the console and wait for keyboard input. An E-Mail UI
would send an e-mail and wait for an answer...</p>
<p>Application code can never call renderWindow() directly and wait for
the answer (as is done by a old-fashioned GUI application when it
opens a modal window) but can only define windows to be displayed and
actions to be taken when the answer comes (call-back functions). Lino
asks the application code to build windows, but how and when they will
be rendered is transparent for the application. For example
<cite>Database.getMainWindow()</cite> must return a window which serves as main
entry point for this database.</p>
<p><cite>ui</cite> is a subclass of the abstract user interface class
<cite>lino.agui.ui.UI</cite>. <cite>UI</cite> defines the interface which is common for any
user interface. HtmlUI is a first (still abstract) subclass of UI that
contains methods to be used for any Web UI. SnakeUI finally is a
usable subclass of HtmlUI which really collaborates with snakeserver.</p>
<p>UI also provides some utility methods (<cite>confirm()</cite>, others to
come) which return a ready-made Window.</p>
</div>
<div class="section" id="callbacks">
<h1><a name="callbacks">Callbacks</a></h1>
<p>Buttons and MenuItems are Components which can cause some application
logic to be executed.</p>
<p>Actions are functions or methods which can be invoked (for example if
a Button has been klicked).</p>
<p><cite>Actions</cite> are &quot;UI-aware methods&quot;: they will be called with a single
parameter &quot;ui&quot;, and they must return a Window instance which will be
rendered as next window.  They can return None. Convention : usually
their name starts with <cite>ui_</cite>.</p>
</div>
</div>
</td></tr></table></body>
</html>
<div class="bottomArea"><p class="footer">This page was generated on Wed Sep 22 16:43:32 2004 by Lino <a href="webman.html">WebMan</a> version 0.6.2pre.</div>